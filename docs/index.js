function loadConfig(){localStorage.getItem("darkMode")==1&&document.documentElement.setAttribute("data-bs-theme","dark")}function toggleDarkMode(){localStorage.getItem("darkMode")==1?(localStorage.setItem("darkMode",0),document.documentElement.setAttribute("data-bs-theme","light")):(localStorage.setItem("darkMode",1),document.documentElement.setAttribute("data-bs-theme","dark"))}loadConfig();function spawnRandomOption(){const e=["p","f","1","2","3","4"],t=e[Math.floor(Math.random()*e.length)];simulateKey(t)}function simulateKey(e){const n=emojiParticle.canvas.width,t=emojiParticle.canvas.height,s={p:{particleType:"popcorn",count:20,originX:Math.random()*n,originY:Math.random()*t,minSpeed:7,maxSpeed:10,angle:-Math.PI/2,angleVariance:Math.PI/2,gravity:.2,lifeTime:120,fade:!0,size:20},f:{particleType:"rocket",count:1,originX:Math.random()*n,originY:t,minSpeed:8,maxSpeed:10,angle:-Math.PI/2,angleVariance:0,gravity:.05,lifeTime:60,fade:!0,size:30,explosionOptions:{count:60,size:24,minSpeed:2,maxSpeed:6,gravity:.1,lifeTime:80,fade:!0}},1:{particleType:"popcorn",count:15,size:50,originX:100,originY:Math.random()*t,minSpeed:10,maxSpeed:13,angle:0,angleVariance:Math.PI/6,gravity:.3,lifeTime:100,fade:!0},2:{particleType:"popcorn",count:15,size:50,originX:n-100,originY:Math.random()*t,minSpeed:5,maxSpeed:8,angle:-3*Math.PI/4,angleVariance:Math.PI/12,gravity:.25,lifeTime:100,fade:!0},3:{particleType:"rocket",count:1,size:50,originX:0,originY:t,minSpeed:10,maxSpeed:12,angle:-Math.PI/4,angleVariance:0,gravity:.05,lifeTime:60+Math.random()*60,fade:!0,explosionOptions:{count:60,size:24,minSpeed:2,maxSpeed:6,gravity:.1,lifeTime:80,fade:!0}},4:{particleType:"rocket",count:1,size:50,originX:n,originY:t,minSpeed:10,maxSpeed:12,angle:-3*Math.PI/4,angleVariance:0,gravity:.05,lifeTime:60+Math.random()*60,fade:!0,explosionOptions:{count:60,size:12,minSpeed:2,maxSpeed:6,gravity:.5,lifeTime:80,fade:!0}}};emojiParticle.worker.postMessage({type:"spawn",options:s[e]})}function initEmojiParticle(){const e=document.createElement("canvas");Object.assign(e.style,{position:"fixed",pointerEvents:"none",top:"0px",left:"0px"}),e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,document.body.prepend(e);const t=e.transferControlToOffscreen(),n=new Worker("emoji-particle.js");return n.postMessage({type:"init",canvas:t},[t]),globalThis.addEventListener("resize",()=>{const e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;n.postMessage({type:"resize",width:e,height:t})}),{canvas:e,offscreen:t,worker:n}}const emojiParticle=initEmojiParticle();document.getElementById("toggleDarkMode").onclick=toggleDarkMode,document.addEventListener("keydown",e=>{const t=e.key.toLowerCase();["p","f","1","2","3","4"].includes(t)&&simulateKey(t)}),document.addEventListener("pointerdown",spawnRandomOption)